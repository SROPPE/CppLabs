//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "Unit2.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm2 *Form2;
TDrawingTool DrawingTool;
class Ell
 {
	 public:
	 Ell(int curX1,int curY1,int curX2, int curY2)
	 {
		 this->curX1= curX1;
		 this->curX2= curX2;
		 this->curY2= curY2;
		 this->curY1= curX1;
	 }
		 Ell()
	 {

	 }
	 void SetEllipsCords(int curX1,int curY1,int curX2, int curY2)
	 {
		 this->curX1= curX1;
		 this->curX2= curX2;
		 this->curY2= curY2;
		 this->curY1= curY1;
	 }
	 void EllipseFlexLeft(TImage *Image1)
	  {
		 curX1--;
		 curX2--;
		 Image1->Canvas->Rectangle(0,0,1000,1000);
		 Image1->Canvas->Ellipse(curX1,curY1,curX2,curY2);
	  }
	   void EllipseFlexUp(TImage *Image1)
	  {
		 curY1--;
		 curY2--;
		 Image1->Canvas->Rectangle(0,0,1000,1000);
		 Image1->Canvas->Ellipse(curX1,curY1,curX2,curY2);
	  }
	   void EllipseFlexÄàóí(TImage *Image1)
	  {
		 curY1++;
		 curY2++;
		 Image1->Canvas->Rectangle(0,0,1000,1000);
		 Image1->Canvas->Ellipse(curX1,curY1,curX2,curY2);
	  }
		void EllipseFlexRight(TImage *Image1)
	  {
		 curX1++;
		 curX2++;
		 Image1->Canvas->Rectangle(0,0,1000,1000);
		 Image1->Canvas->Ellipse(curX1,curY1,curX2,curY2);
	  }
	 private:
		int curX1;
		int curX2;
		int curY1;
		int curY2;
	 protected:
 };
 Ell el;
//---------------------------------------------------------------------------
__fastcall TForm2::TForm2(TComponent* Owner)
	: TForm(Owner)
{
}
//--------------------------------------------------------------------------
int lastX=0;
int lastY=0;


void __fastcall TForm2::EllipseClick(TObject *Sender)
{
   DrawingTool = dtEllipse;
}
//---------------------------------------------------------------------------
  void __fastcall TForm2::DrawFigure(int X, int Y)
 {

switch(DrawingTool) {
case dtLine:

case dtRectangle:

Image1->Canvas->LineTo(X, Y);
lastX = -1; lastY = -1; break;

case  dtEllipse:
el.SetEllipsCords(lastX,lastY,X,Y);
Image1->Canvas->Ellipse(lastX, lastY, X,Y);
 break;

case dtRoundRect:

Image1->Canvas->Rectangle(lastX,lastY, X,Y);

lastX = -1; lastY = -1; break;

}

}
void __fastcall TForm2::Image1MouseDown(TObject *Sender, TMouseButton Button, TShiftState Shift,
          int X, int Y)
{
		Image1->Canvas->MoveTo(X, Y);
		lastX = X; lastY = Y;
}
//---------------------------------------------------------------------------
void __fastcall TForm2::Image1MouseUp(TObject *Sender, TMouseButton Button, TShiftState Shift,
          int X, int Y)
{
	DrawFigure(X, Y);
	lastX = -1;
	lastY = -1;
}
//---------------------------------------------------------------------------

void __fastcall TForm2::FormCreate(TObject *Sender)
{
Image1->Canvas->FillRect(
Image1->Canvas->ClipRect);
}
//---------------------------------------------------------------------------





void __fastcall TForm2::UpClick(TObject *Sender)
{
 el.EllipseFlexUp(Image1);
}
//---------------------------------------------------------------------------

